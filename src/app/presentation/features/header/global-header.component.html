<header class="global-header">
  <!-- Left Zone: Logo + Workspace Switcher -->
  <div class="header-left">
    <!-- Logo -->
    <div class="logo">
      <span class="material-icons">dashboard</span>
      <span class="logo-text">Black Tortoise</span>
    </div>
    
    <!-- Workspace Switcher -->
    @if (workspaceContext.hasWorkspace()) {
      <div class="workspace-switcher">
        <button 
          class="workspace-button" 
          (click)="toggleWorkspaceMenu()"
          aria-label="Switch workspace"
          type="button">
          <span class="material-icons">folder</span>
          <span class="workspace-name">
            {{ workspaceContext.currentWorkspaceName() }}
          </span>
          <span class="material-icons">expand_more</span>
        </button>
        
        @if (showWorkspaceMenu()) {
          <div class="workspace-menu">
            @for (workspace of workspaceContext.availableWorkspaces(); track workspace.id) {
              <button 
                class="workspace-menu-item"
                [class.active]="workspace.id === workspaceContext.currentWorkspace()?.id"
                (click)="selectWorkspace(workspace.id)"
                type="button">
                <span class="material-icons">folder</span>
                <span>{{ workspace.name }}</span>
              </button>
            }
            <div class="workspace-menu-divider"></div>
            <button 
              class="workspace-menu-item" 
              (click)="createNewWorkspace()"
              type="button">
              <span class="material-icons">add</span>
              <span>Create Workspace</span>
            </button>
          </div>
        }
      </div>
    }
  </div>
  
  <!-- Center Zone: Global Search -->
  <div class="header-center">
    <div class="search-container">
      <span class="material-icons">search</span>
      <input 
        type="text" 
        class="search-input" 
        placeholder="Search (not implemented)"
        aria-label="Global search"
        (input)="onSearchInput($event)">
    </div>
  </div>
  
  <!-- Right Zone: Notifications + Settings + Identity Switcher -->
  <div class="header-right">
    <!-- Notifications -->
    <button class="icon-button" aria-label="Notifications" type="button" (click)="toggleNotifications()">
      <span class="material-icons">notifications</span>
      @if (notificationCount() > 0) {
        <span class="badge">{{ notificationCount() }}</span>
      }
    </button>
    
    <!-- Settings -->
    <button class="icon-button" aria-label="Settings" type="button" (click)="openSettings()">
      <span class="material-icons">settings</span>
    </button>
    
    <!-- Theme Toggle -->
    <button class="icon-button" aria-label="Toggle theme" type="button" (click)="toggleTheme()">
      <span class="material-icons">
        @if (themeMode() === 'dark') { light_mode } @else { dark_mode }
      </span>
    </button>

    @if (showWorkspaceControls()) {
      <app-workspace-header-controls />
    }
  </div>
</header>
